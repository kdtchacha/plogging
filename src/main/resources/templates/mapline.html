<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>원, 선, 사각형, 다각형 표시하기</title>

</head>

<body>
    <div id="map" style="width:100%;height:350px;"></div>


    <script type="text/javascript"
        src="//dapi.kakao.com/v2/maps/sdk.js?appkey=2be20ca0a50df1e82e1ef6c4f832ca69"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        console.log('[[${param.actid}]]');

        var ggg;
        var gh = [];

        const data = axios({
            url: 'linetest?actid=[[${param.actid}]]',
            method: 'get',
        })
            .then(function (res) {
                ggg = res.data;
                console.log(ggg);
                console.log(ggg[0].La);
                console.log(ggg.length);

                for (let i = 0; i < ggg.length; i++) {
                    const aaa = new kakao.maps.LatLng(ggg[i].Ma, ggg[i].La);
                    console.log(aaa);
                    gh.push(aaa);
                }



                var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
                    mapOption = {
                        center: new kakao.maps.LatLng(ggg[0].Ma, ggg[0].La), // 지도의 중심좌표
                        level: 6 // 지도의 확대 레벨
                    };

                var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다



                // 선을 구성하는 좌표 배열입니다. 이 좌표들을 이어서 선을 표시합니다
                console.log(gh);
                var linePath = gh;

                // 지도에 표시할 선을 생성합니다
                var polyline = new kakao.maps.Polyline({
                    path: linePath, // 선을 구성하는 좌표배열 입니다
                    strokeWeight: 4, // 선의 두께입니다 
                    strokeColor: '#1b87dd', // 선의 색깔입니다
                    strokeOpacity: 1, // 선의 불투명도입니다 0에서 1 사이값이며 0에 가까울수록 투명합니다
                    strokeStyle: 'solid' // 선의 스타일입니다
                });

                // 지도에 선을 표시합니다 
                polyline.setMap(map);



                var markerPosition = new kakao.maps.LatLng(ggg[0].Ma, ggg[0].La);

                // 마커를 생성합니다
                var marker = new kakao.maps.Marker({
                    position: markerPosition
                });

                // 마커가 지도 위에 표시되도록 설정합니다
                marker.setMap(map);


                var iwContent = '<div style="padding:5px;">시작위치입니다!</div>', // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
                    iwPosition = new kakao.maps.LatLng(ggg[0].Ma, ggg[0].La); //인포윈도우 표시 위치입니다

                // 인포윈도우를 생성합니다
                var infowindow = new kakao.maps.InfoWindow({
                    position: iwPosition,
                    content: iwContent
                });

                // 마커 위에 인포윈도우를 표시합니다. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됩니다
                infowindow.open(map, marker);




                var markerPosition = new kakao.maps.LatLng(ggg[ggg.length - 1].Ma, ggg[ggg.length - 1].La);

                // 마커를 생성합니다
                var marker = new kakao.maps.Marker({
                    position: markerPosition
                });

                // 마커가 지도 위에 표시되도록 설정합니다
                marker.setMap(map);


                var iwContent = '<div style="padding:5px;">종료위치입니다!</div>', // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
                    iwPosition = new kakao.maps.LatLng(ggg[ggg.length - 1].Ma, ggg[ggg.length - 1].La); //인포윈도우 표시 위치입니다

                // 인포윈도우를 생성합니다
                var infowindow = new kakao.maps.InfoWindow({
                    position: iwPosition,
                    content: iwContent
                });

                // 마커 위에 인포윈도우를 표시합니다. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됩니다
                infowindow.open(map, marker);


            });

    </script>
</body>

</html>